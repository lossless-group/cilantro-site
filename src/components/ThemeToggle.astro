---
---
<button id="theme-toggle" class="inline-flex items-center gap-2 rounded-full border border-border px-3 py-1 text-sm text-foreground bg-card hover:bg-muted transition-colors" aria-label="Toggle theme">
  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <circle cx="12" cy="12" r="5" />
    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
  </svg>
  <span>Theme</span>
</button>

<script>
  const root = document.documentElement;
  const STORAGE_KEY = 'theme';
  const initial = localStorage.getItem(STORAGE_KEY);
  if (initial === 'dark') {
    root.classList.add('dark');
  } else if (initial === 'light') {
    root.classList.remove('dark');
  }
  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    const isDark = root.classList.toggle('dark');
    localStorage.setItem(STORAGE_KEY, isDark ? 'dark' : 'light');
  });
  // Respect OS preference on first load if no saved choice
  if (!initial) {
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (prefersDark) root.classList.add('dark');
  }
</script>